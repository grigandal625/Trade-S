(this.webpackJsonppro=this.webpackJsonppro||[]).push([[0],{88:function(e,t,a){e.exports=a(98)},93:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=(a(93),a(15)),s=a(20),u=a(18),i=a(17),m=a(179),p=a(158),f=a(176),d=a(162),g=a(163),h=a(164),E=a(70),v=a.n(E),b=a(71),k=a.n(b),C=a(73),y=a.n(C),O=a(72),j=a.n(O),D=a(173),S=a(174),P=a(35),w=a(167),T=a(68),x=a.n(T),A=a(69),F=a.n(A),G=a(180),R=a(175),_=a(181),M=a(74),L=a(75),I=a(178),q=a(172),H=a(160),J=a(161),W=a(151),X=a(159),B=a(156),U=a(157),z=a(155),N=a(169),V=a(171),$=a(166),K=a(168),Q=a(170),Y=a(165),Z=a(177),ee=a(66),te=a.n(ee),ae=a(65),ne=a.n(ae),re=a(67),oe=a.n(re),ce=function e(){Object(l.a)(this,e)};ce.executed=function(e){return function(t){if(e)try{e(JSON.parse(t.target.responseText))}catch(a){}}},ce.getGroupChats=function(e,t){var a=new XMLHttpRequest;a.open("GET","https://api.vk.com/method/messages.getConversations?access_token=".concat(e,"&v=5.120")),a.onload=ce.executed(t),a.send()},ce.sendMessageToGroupChat=function(e,t,a,n){var r=new XMLHttpRequest;r.open("GET","https://api.vk.com/method/messages.send?peer_id=".concat(t,"&message=").concat(encodeURIComponent(a),"&access_token=").concat(e,"&v=5.38")),r.onload=ce.executed(n),r.send()},ce.getUsersGroups=function(e,t,a){var n=new XMLHttpRequest;n.open("GET","https://api.vk.com/method/groups.get?user_id=".concat(e,"&filter=admin,editor,moder&extended=1&v=5.92&access_token=").concat(t)),n.onload=ce.executed(a),n.send()};var le=ce,se=a(182),ue=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onOk=function(){n.props.onOk(n.state.key)},n.onCancel=function(){n.props.onCancel()},n.keyChanged=function(e){if(e.currentTarget){var t=e.currentTarget.value;n.setState((function(e){return e.key=t,e}))}},n.render=function(){return r.a.createElement(W.a,{open:n.props.open,onClose:n.switchDialog,"aria-labelledby":"form-dialog-title"},r.a.createElement(z.a,null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 API-\u043a\u043b\u044e\u0447 \u0433\u0440\u0443\u043f\u043f\u044b"),r.a.createElement(B.a,null,r.a.createElement(U.a,null,"\u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 \u0447\u0430\u0442\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c API-\u043a\u043b\u044e\u0447 \u0433\u0440\u0443\u043f\u043f\u044b."),r.a.createElement(Z.a,{autoFocus:!0,margin:"dense",label:"API-\u043a\u043b\u044e\u0447 \u0433\u0440\u0443\u043f\u043f\u044b",fullWidth:!0,onChange:n.keyChanged})),r.a.createElement(X.a,null,r.a.createElement(H.a,{onClick:n.onCancel,color:"primary"},"Cancel"),r.a.createElement(H.a,{onClick:n.onOk,color:"primary"},"Ok")))},n.state={key:""},n}return a}(r.a.Component),ie=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).openDialog=function(){n.setState((function(e){return e.openDialog=!0,e}))},n.closeDialog=function(){n.setState((function(e){return e.openDialog=!1,e}))},n.loadChats=function(){n.state.renderedPlatform!=n.props.platform&&n.load()},n.reload=function(){n.setState((function(e,t){return e.hasToken=void 0,e.renderedPlatform=-1,e}))},n.load=function(){var e=Object(s.a)(n);chrome.storage.local.get(["settsData"],(function(t){var a=t;void 0!=a.settsData&&a.settsData.messages&&a.settsData.messages[n.props.platform]&&a.settsData.messages[n.props.platform].groupToken?e.gotToken(a.settsData.messages[n.props.platform].groupToken):e.setState((function(e,t){return e.settsData=a.settsData,e.renderedPlatform=t.platform,e.hasToken=!1,e.groupToken=void 0,e}))}))},n.tokenRecieved=function(e){n.gotToken(e,n.reload)},n.gotToken=function(e,t){var a=Object(s.a)(n),r=e,o=t;chrome.storage.local.get(["settsData"],(function(e){var t=e,n=void 0!=t.settsData?t.settsData:{};n.messages=n.messages?n.messages:[],n.messages[a.props.platform]=n.messages[a.props.platform]?n.messages[a.props.platform]:{},n.messages[a.props.platform].groupToken=r,n.messages[a.props.platform].toSend=n.messages[a.props.platform].toSend?n.messages[a.props.platform].toSend:[],chrome.storage.local.set({settsData:n},(function(){a.setState((function(e,a){return e.settsData=t.settsData,e.renderedPlatform=a.platform,e.hasToken=!0,e.groupToken=r,e.openDialog=!1,e}),(function(){try{o()}catch(e){}}))}))}))},n.render=function(){return n.loadChats(),void 0==n.state.hasToken?r.a.createElement(J.a,{style:{padding:20}}):n.state.hasToken?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement(d.a,{button:!0,onClick:n.openDialog},r.a.createElement(g.a,null,r.a.createElement(ne.a,null)),r.a.createElement(h.a,{primary:n.state.groupToken.slice(0,10)+"..."}))),r.a.createElement(ue,{open:n.state.openDialog,onCancel:n.closeDialog,onOk:n.tokenRecieved}),r.a.createElement(me,{platform:n.props.platform,token:n.state.groupToken,data:n.state.settsData,tab:Object(s.a)(n)})):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement(d.a,{button:!0,onClick:n.openDialog},r.a.createElement(g.a,null,r.a.createElement(te.a,null)),r.a.createElement(h.a,{primary:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 API-\u043a\u043b\u044e\u0447 \u0433\u0440\u0443\u043f\u043f\u044b"}))),r.a.createElement(ue,{open:n.state.openDialog,onCancel:n.closeDialog,onOk:n.gotToken}))},n.state={openDialog:!1},n}return a}(r.a.Component),me=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).loadChats=function(){-1!=n.props.platform&&le.getGroupChats(n.props.token,n.chatsRecieved)},n.chatsRecieved=function(e){if(e.error)return alert(e),console.log(e),void n.setState((function(e){return e.loaded=!1,e}));var t=e.response.items.filter((function(e){return"chat"==e.conversation.peer.type})).map((function(e){return{name:e.conversation.chat_settings.title,id:e.conversation.peer.id}})),a=Object(s.a)(n);chrome.storage.local.get(["settsData"],(function(e){var n=e,r=n.settsData?n.settsData:{};r.messages=r.messages?r.messages:[],r.messages[a.props.platform]=r.messages[a.props.platform]?r.messages[a.props.platform]:{},r.messages[a.props.platform].toSend=r.messages[a.props.platform].toSend?r.messages[a.props.platform].toSend:[];var o=r.messages[a.props.platform].toSend;a.updateChats(t.map((function(e){return e.selected=o.includes(e.id),e})))}))},n.updateChats=function(e){var t=e,a=Object(s.a)(n);chrome.storage.local.get(["settsData"],(function(e){var n=e,r=n.settsData?n.settsData:{};r.messages=r.messages?r.messages:[],r.messages[a.props.platform]=r.messages[a.props.platform]?r.messages[a.props.platform]:{},r.messages[a.props.platform].toSend=t.filter((function(e){return e.selected})).map((function(e){return e.id})),chrome.storage.local.set({settsData:r},(function(){a.setState((function(e,a){return e.renderedPlatform=a.platform,e.loaded=!0,e.chats=t,e}))}))}))},n.toSendChanged=function(e){return function(t){var a=e;n.updateChats(n.state.chats.map((function(e){return e.selected=e.id!=a.id?e.selected:!a.selected,e})))}},n.getChatRows=function(){return n.state.chats.map((function(e){return r.a.createElement(Y.a,null,r.a.createElement($.a,null,e.name),r.a.createElement($.a,null,r.a.createElement(se.a,{checked:e.selected,color:"primary",onChange:n.toSendChanged(e)})),r.a.createElement($.a,{align:"right"},r.a.createElement(H.a,{onClick:function(){console.log("sending"),le.sendMessageToGroupChat(n.props.token,e.id,"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")}},"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")))}))},n.render=function(){return n.state.renderedPlatform!=n.props.platform&&n.props.tab.reload(),n.state.loaded?r.a.createElement(K.a,{component:L.a},r.a.createElement(N.a,null,r.a.createElement(Q.a,null,r.a.createElement(Y.a,null,r.a.createElement($.a,null,"\u0427\u0430\u0442"),r.a.createElement($.a,null,"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430"),r.a.createElement($.a,{align:"right"},r.a.createElement(H.a,{onClick:n.props.tab.reload},r.a.createElement(oe.a,null))))),r.a.createElement(V.a,null,n.getChatRows(n.state.chats)))):r.a.createElement(J.a,{style:{padding:20}})},n.state={loaded:!1,renderedPlatform:e.platform},n.loadChats(),n}return a}(r.a.Component),pe=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=function(){return r.a.createElement(r.a.Fragment,null,n.props.platform)},n.state={loaded:!1,renderedPlatform:e.platform},n.loadChats(),n}return a}(r.a.Component),fe=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).render=function(){switch(e.props.currentPage){case 0:return r.a.createElement(ge,null);case 1:return r.a.createElement(he,null);case 2:return r.a.createElement(Ee,null);case 3:return r.a.createElement(ve,null);default:return r.a.createElement(P.a,null,"Default page")}},e}return a}(r.a.Component);function de(e){var t=r.a.useState(0),a=Object(M.a)(t,2),n=a[0],o=a[1];return r.a.createElement(L.a,null,r.a.createElement(I.a,{value:n,onChange:function(t,a){o(a),e.tabChanged(a)}},r.a.createElement(q.a,{label:"Olymp Trade"}),r.a.createElement(q.a,{label:"Pocket Option"})))}var ge=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).tabChanged=function(e){n.setState((function(t){return t.index=e,t}))},n.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{tabChanged:n.tabChanged}),r.a.createElement(ie,{platform:n.state.index}))},n.state={index:0},n}return a}(r.a.Component),he=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).loadGroups=function(){chrome.storage.local.get(["settsData"],(function(e){var t=e;t.settsData.posts&&t.settsData.posts.accessToken?n.setState((function(e){return e.registered=!0,e.token=t.settsData.posts.accessToken,e})):n.setState((function(e){return e.registered=!1,e.token=void 0,e}))}))},n.register=function(){chrome.storage.local.set({CepVkLogin:!0},(function(){window.open("https://oauth.vk.com/authorize?client_id=6290333&scope=wall,offline&redirect_uri=http://oauth.vk.com/blank.html&response_type=token&v=5.92")}))},n.tabChanged=function(e){n.setState((function(t){return t.index=e,t}))},n.render=function(){return n.state.registered?r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{style:{padding:10}},r.a.createElement(H.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:n.register},"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0432\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435")),r.a.createElement(de,{tabChanged:n.tabChanged}),r.a.createElement(pe,{platform:n.state.index})):r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{style:{padding:10}},r.a.createElement(H.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:n.register},"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0432\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435")))},n.state={registered:!1};var o=Object(s.a)(n);return chrome.runtime.onMessage.addListener((function(e,t,a){e.accessToken&&"Olympcepy"==e.extension&&(a({}),o.loadGroups())})),n}return a}(r.a.Component),Ee=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).render=function(){return r.a.createElement(r.a.Fragment,null,"format")},e}return a}(r.a.Component),ve=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).render=function(){return r.a.createElement(r.a.Fragment,null,"account")},e}return a}(r.a.Component),be=fe,ke=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onPanelSwitch=function(e){return function(t){null===e&&(e=!n.state.open),(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&n.setState((function(t){return t.open=e,t}))}},n.home=function(){n.setState((function(e){return e.currentPage=4,e}))},n.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{position:"static"},r.a.createElement(S.a,null,r.a.createElement(w.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:n.onPanelSwitch(!0)},r.a.createElement(x.a,null)),r.a.createElement(_.a,{src:"icon_128.png",style:{cursor:"pointer"},onClick:n.home}),r.a.createElement(P.a,{style:{cursor:"pointer",marginLeft:10},onClick:n.home,variant:"h6"},"Olympcepy"))),r.a.createElement(m.a,{open:n.state.open,onOpen:n.onPanelSwitch(!0),onClose:n.onPanelSwitch(!1)},r.a.createElement(ye,{page:Object(s.a)(n)})),r.a.createElement(Ce,{currentPage:n.state.currentPage,page:Object(s.a)(n)}),r.a.createElement(be,{currentPage:n.state.currentPage}))},n.state={open:!1,currentPage:4},n}return a}(r.a.Component),Ce=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).home=function(){e.props.page.setState((function(e){return e.currentPage=4,e}))},e.render=function(){return r.a.createElement(G.a,{style:{padding:20},"aria-label":"breadcrumb"},r.a.createElement(R.a,{style:{cursor:"pointer"},onClick:e.home},"Olympcepy"),r.a.createElement(P.a,{style:{cursor:"default"}},["\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u0447\u0430\u0442\u0430\u0445 \u0433\u0440\u0443\u043f\u043f\u044b","\u041f\u043e\u0441\u0442 \u043d\u0430 \u0441\u0442\u0435\u043d\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","\u0424\u043e\u0440\u043c\u0430\u0442 \u0441\u0438\u0433\u043d\u0430\u043b\u043e\u0432","\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e",""][e.props.currentPage]))},e}return a}(r.a.Component),ye=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).openMessages=function(){e.props.page.setState((function(e){return e.open=!1,e.currentPage=0,e}))},e.openPosts=function(){e.props.page.setState((function(e){return e.open=!1,e.currentPage=1,e}))},e.openFormat=function(){e.props.page.setState((function(e){return e.open=!1,e.currentPage=2,e}))},e.openAccount=function(){e.props.page.setState((function(e){return e.open=!1,e.currentPage=3,e}))},e.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{style:{marginTop:-8}},r.a.createElement(d.a,{style:{padding:16,paddingLeft:25,background:"#3f51b5",color:"white"},button:!0,key:"\u041c\u0435\u043d\u044e \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a",onClick:e.props.page.onPanelSwitch(!1)},r.a.createElement(g.a,null,r.a.createElement(F.a,{style:{color:"white"}})),r.a.createElement(h.a,{style:{marginLeft:-20},primary:"\u041c\u0435\u043d\u044e \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"}))),r.a.createElement(f.a,null),r.a.createElement("label",{style:{textAlign:"center"}},"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0441\u0438\u0433\u043d\u0430\u043b\u043e\u0432 \u0432 \u0412\u041a"),r.a.createElement(f.a,null),r.a.createElement(p.a,null,r.a.createElement(d.a,{button:!0,onClick:e.openMessages,key:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u0447\u0430\u0442\u0430\u0445 \u0433\u0440\u0443\u043f\u043f\u044b"},r.a.createElement(g.a,null,r.a.createElement(v.a,null)),r.a.createElement(h.a,{primary:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u0447\u0430\u0442\u0430\u0445 \u0433\u0440\u0443\u043f\u043f\u044b"})),r.a.createElement(d.a,{button:!0,onClick:e.openPosts,key:"\u041f\u043e\u0441\u0442 \u043d\u0430 \u0441\u0442\u0435\u043d\u0435 \u0433\u0440\u0443\u043f\u043f\u044b"},r.a.createElement(g.a,null,r.a.createElement(k.a,null)),r.a.createElement(h.a,{primary:"\u041f\u043e\u0441\u0442 \u043d\u0430 \u0441\u0442\u0435\u043d\u0435 \u0433\u0440\u0443\u043f\u043f\u044b"}))),r.a.createElement(f.a,null),r.a.createElement("label",{style:{textAlign:"center"}},"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement(f.a,null),r.a.createElement(p.a,null,r.a.createElement(d.a,{button:!0,onClick:e.openFormat,key:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0441\u0438\u0433\u043d\u0430\u043b\u043e\u0432"},r.a.createElement(g.a,null,r.a.createElement(j.a,null)),r.a.createElement(h.a,{primary:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0441\u0438\u0433\u043d\u0430\u043b\u043e\u0432"})),r.a.createElement(d.a,{button:!0,onClick:e.openAccount,key:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"},r.a.createElement(g.a,null,r.a.createElement(y.a,null)),r.a.createElement(h.a,{primary:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"}))))},e}return a}(r.a.Component),Oe=ke;var je=function(){return r.a.createElement(Oe,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[88,1,2]]]);
//# sourceMappingURL=main.481e1d9f.chunk.js.map