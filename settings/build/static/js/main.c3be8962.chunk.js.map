{"version":3,"sources":["API.js","VKMethods.js","TradeSTabs.js","TradeSContent.js","MainPage.js","App.js","serviceWorker.js","index.js"],"names":["API","recieved","callback","event","JSON","parse","currentTarget","responseText","e","authorize","id","token","xhr","XMLHttpRequest","open","obj","method","data","onload","send","stringify","getUserById","getUserByKey","key","getMyData","cb","chrome","storage","local","get","r","userId","setUserSetts","setts","setUserSettsByKey","resp","uploadMySetts","res","settsData","accessToken","undefined","messages","map","groupToken","toShow","posts","downloadMySetts","user","i","toSend","set","VKMethods","executed","target","getGroupChats","sendMessageToGroupChat","message","encodeURIComponent","getUsersGroups","getMyGroups","postOnGroupWall","groupId","postOnMyGroupWall","m","APIKeyDialog","props","onOk","state","onCancel","keyChanged","newKey","value","setState","render","Dialog","onClose","switchDialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","margin","label","fullWidth","onChange","DialogActions","Button","onClick","color","React","Component","MessagesTab","build","platform","gotToken","loaded","rebuild","getMessages","platformMsg","reload","openDialog","closeDialog","self","console","error","updateMessages","chats","filter","selected","shown","load","p","result","alert","log","response","items","c","conversation","peer","type","chat","name","chat_settings","title","includes","toSendChanged","toShowChanged","getChatRows","TableRow","TableCell","Switch","checked","align","getChatTable","TableContainer","component","Paper","Table","TableHead","TableBody","CircularProgress","style","padding","List","ListItem","button","ListItemIcon","ListItemText","primary","slice","PostsTab","groups","getPosts","updatePosts","length","group","getGropuRows","EditBtnNameDialog","btnList","edtButton","buttons","index","etdIndex","replace","updateButtons","delta","closeBtnNameDialog","nameDialog","initValue","DonatFrame","src","width","height","frameborder","allowtransparency","scrolling","Typography","Link","href","TradeSContent","currentPage","Divider","OPTabs","useState","setValue","Tabs","newValue","tabChanged","Tab","MessagesContent","currentTab","PostsContent","FormatContent","getButtons","timeDelta","text","addButton","push","openBtnNameDialog","deleteButton","splice","getFormatAvatar","getFormatText","format","formatTypes","textFormatChanged","formatIndex","buttonIndex","v","getFormatContent","size","closeMenus","buttonMenus","ref","onAddItem","onDeleteItem","itemIndex","openAddItemMenu","t","addItem","itemAdder","createRef","variant","Popper","anchorEl","role","transition","ClickAwayListener","onClickAway","MenuList","autoFocusItem","MenuItem","getButtonConstructor","preview","ButtonFormat","fromItems","restore","ButtonGroup","Breadcrumbs","separator","getButtonsList","background","setTimeDelta","valueLabelFormat","parseInt","getMarks","Array","keys","marginLeft","Slider","step","marks","min","max","paddingTop","paddingBottom","AccountContent","Card","CardHeader","avatar","Avatar","subheader","CardActions","clear","window","location","ass","dir","exp","stn","stv","plf","join","add","insert","delete","update","this","b","CenterView","position","left","top","transform","children","Page","loadAccount","onChanged","addListener","loadData","logined","registered","s","TRSVkLogin","register","onPanelSwitch","home","authContent","CardContent","alignItems","justifyContent","AppBar","Toolbar","IconButton","edge","aria-label","cursor","SwipeableDrawer","onOpen","page","Backdrop","runtime","onMessage","request","sender","sendResponse","extension","TradeSPath","PageMenu","openMessages","openPosts","openFormat","openAccount","marginTop","paddingLeft","textAlign","App","Boolean","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.c3be8962.chunk.js","sourcesContent":["/*global chrome*/\r\n\r\nclass API {\r\n    static recieved = (callback) => (event) => {\r\n        try {\r\n            callback(JSON.parse(event.currentTarget.responseText));\r\n        } catch (e) {}\r\n    };\r\n\r\n    static authorize = (id, token, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://trades.pythonanywhere.com/api\");\r\n        var obj = {\r\n            method: \"auth\",\r\n            data: {\r\n                id: id,\r\n                token: token,\r\n            },\r\n        };\r\n        xhr.onload = API.recieved(callback);\r\n        xhr.send(JSON.stringify(obj));\r\n    };\r\n\r\n    static getUserById = (id, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://trades.pythonanywhere.com/api\");\r\n        var obj = {\r\n            method: \"user\",\r\n            data: {\r\n                id: id,\r\n            },\r\n        };\r\n        xhr.onload = API.recieved(callback);\r\n        xhr.send(JSON.stringify(obj));\r\n    };\r\n\r\n    static getUserByKey = (key, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://trades.pythonanywhere.com/api\");\r\n        var obj = {\r\n            method: \"user\",\r\n            data: {\r\n                key: key,\r\n            },\r\n        };\r\n        xhr.onload = API.recieved(callback);\r\n        xhr.send(JSON.stringify(obj));\r\n    };\r\n\r\n    static getMyData = (callback) => {\r\n        var cb = callback;\r\n        chrome.storage.local.get([\"userId\"], (r) => {\r\n            API.getUserById(r.userId, cb);\r\n        });\r\n    };\r\n\r\n    static setUserSetts = (id, setts, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://trades.pythonanywhere.com/api\");\r\n        var obj = {\r\n            method: \"setts\",\r\n            data: {\r\n                id: id,\r\n                setts: setts,\r\n            },\r\n        };\r\n        xhr.onload = API.recieved(callback);\r\n        xhr.send(JSON.stringify(obj));\r\n    };\r\n\r\n    static setUserSettsByKey = (key, setts, callback) => {\r\n        API.getUserByKey(key, (resp) => {\r\n            API.setUserSetts(resp.id, setts, callback);\r\n        });\r\n    };\r\n\r\n    static uploadMySetts = (callback) => {\r\n        var cb = callback;\r\n        chrome.storage.local.get([\"settsData\", \"userId\"], (res) => {\r\n            var r = res;\r\n            if (r.userId && r.settsData) {\r\n                var setts = {\r\n                    accessToken: r.settsData.accessToken\r\n                        ? r.settsData.accessToken\r\n                        : undefined,\r\n                    messages: r.settsData.messages\r\n                        ? r.settsData.messages.map((e) => {\r\n                              return {\r\n                                  groupToken: e.groupToken\r\n                                      ? e.groupToken\r\n                                      : undefined,\r\n                                  toShow: e.toShow ? e.toShow : [],\r\n                              };\r\n                          })\r\n                        : undefined,\r\n                    posts: r.settsData.posts\r\n                        ? r.settsData.posts.map((e) => {\r\n                              return {\r\n                                  toShow: e.toShow ? e.toShow : [],\r\n                              };\r\n                          })\r\n                        : undefined,\r\n                };\r\n                API.setUserSetts(r.userId, setts, cb);\r\n            }\r\n        });\r\n    };\r\n\r\n    static downloadMySetts = (callback) => {\r\n        var cb = callback;\r\n        chrome.storage.local.get([\"settsData\", \"userId\"], (res) => {\r\n            var r = res;\r\n            if (r.userId) {\r\n                API.getUserById(r.userId, (user) => {\r\n                    var setts = r.settsData ? r.settsData : {};\r\n                    setts.messages = user.setts.messages\r\n                        ? user.setts.messages.map((e, i) => {\r\n                              e.toSend =\r\n                                  e.toSend != undefined\r\n                                      ? e.toSend\r\n                                      : setts.messages &&\r\n                                        setts.messages[i] &&\r\n                                        setts.messages[i].toSend\r\n                                      ? setts.messages[i].toSend\r\n                                      : [];\r\n                              e.toShow =\r\n                                  e.toShow != undefined\r\n                                      ? e.toShow\r\n                                      : setts.messages &&\r\n                                        setts.messages[i] &&\r\n                                        setts.messages[i].toShow\r\n                                      ? setts.messages[i].toShow\r\n                                      : [];\r\n                              return e;\r\n                          })\r\n                        : [];\r\n                    setts.posts = user.setts.posts\r\n                        ? user.setts.posts.map((e, i) => {\r\n                              e.toSend =\r\n                                  e.toSend != undefined\r\n                                      ? e.toSend\r\n                                      : setts.posts &&\r\n                                        setts.posts[i] &&\r\n                                        setts.posts[i].toSend\r\n                                      ? setts.posts[i].toSend\r\n                                      : [];\r\n                              e.toShow =\r\n                                  e.toShow != undefined\r\n                                      ? e.toShow\r\n                                      : setts.posts &&\r\n                                        setts.posts[i] &&\r\n                                        setts.posts[i].toShow\r\n                                      ? setts.posts[i].toShow\r\n                                      : [];\r\n                              return e;\r\n                          })\r\n                        : [];\r\n                    setts.accessToken = user.setts.accessToken;\r\n                    chrome.storage.local.set(\r\n                        {\r\n                            settsData: setts,\r\n                        },\r\n                        () => {\r\n                            try {\r\n                                cb(setts);\r\n                            } catch (e) {}\r\n                        }\r\n                    );\r\n                });\r\n            }\r\n        });\r\n    };\r\n}\r\n\r\nexport default API;\r\n","/*global chrome*/\r\n\r\nclass VKMethods {\r\n    static executed = (callback) => (event) => {\r\n        if (callback) {\r\n            try {\r\n                callback(JSON.parse(event.target.responseText));\r\n            } catch (e) {}\r\n        }\r\n    };\r\n\r\n    static getGroupChats = (groupToken, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\r\n            \"GET\",\r\n            `https://api.vk.com/method/messages.getConversations?access_token=${groupToken}&v=5.120`\r\n        );\r\n        xhr.onload = VKMethods.executed(callback);\r\n        xhr.send();\r\n    };\r\n\r\n    static sendMessageToGroupChat = (groupToken, id, message, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\r\n            \"GET\",\r\n            `https://api.vk.com/method/messages.send?peer_id=${id}&message=${encodeURIComponent(\r\n                message\r\n            )}&access_token=${groupToken}&v=5.38`\r\n        );\r\n        xhr.onload = VKMethods.executed(callback);\r\n        xhr.send();\r\n    };\r\n\r\n    static getUsersGroups = (id, token, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\r\n            \"GET\",\r\n            `https://api.vk.com/method/groups.get?user_id=${id}&filter=admin,editor,moder&extended=1&v=5.92&access_token=${token}`\r\n        );\r\n        xhr.onload = VKMethods.executed(callback);\r\n        xhr.send();\r\n    };\r\n\r\n    static getMyGroups = (callback) => {\r\n        var cb = callback\r\n        chrome.storage.local.get(['settsData', 'userId'], (res)=>{\r\n            var r = res;\r\n            VKMethods.getUsersGroups(r.userId, r.settsData.accessToken, cb)\r\n        })\r\n    }\r\n\r\n    static postOnGroupWall = (groupId, token, message, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\r\n            \"POST\",\r\n            `https://api.vk.com/method/wall.post?owner_id=-${groupId}&from_group=1&message=${message}&signed=1&v=5.120&access_token=${token}`,\r\n            true\r\n        );\r\n        xhr.onload = VKMethods.executed(callback);\r\n        xhr.send();\r\n    };\r\n\r\n    static postOnMyGroupWall = (groupId, message, callback) => {\r\n        var cb = callback\r\n        var id = groupId;\r\n        var m = message;\r\n        chrome.storage.local.get(['settsData'], (res)=>{\r\n            var r = res;\r\n            VKMethods.postOnGroupWall(id, r.settsData.accessToken, m, cb)\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport default VKMethods;\r\n","/*global chrome*/\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport React from \"react\";\r\nimport VKMethods from \"./VKMethods\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nclass APIKeyDialog extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { key: \"\" };\r\n    }\r\n\r\n    onOk = () => {\r\n        this.props.onOk(this.state.key);\r\n    };\r\n\r\n    onCancel = () => {\r\n        this.props.onCancel();\r\n    };\r\n\r\n    keyChanged = (event) => {\r\n        if (event.currentTarget) {\r\n            var newKey = event.currentTarget.value;\r\n            this.setState((state) => {\r\n                state.key = newKey;\r\n                return state;\r\n            });\r\n        }\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <Dialog\r\n                open={this.props.open}\r\n                onClose={this.switchDialog}\r\n                aria-labelledby=\"form-dialog-title\"\r\n            >\r\n                <DialogTitle>Введите API-ключ группы</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        Для обеспечения возможности отправки сообщений в чаты\r\n                        необходимо указать API-ключ группы.\r\n                    </DialogContentText>\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        label=\"API-ключ группы\"\r\n                        fullWidth\r\n                        onChange={this.keyChanged}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={this.onCancel} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={this.onOk} color=\"primary\">\r\n                        Ok\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    };\r\n}\r\n\r\nclass MessagesTab extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            platform: this.props.platform,\r\n            openDialog: false,\r\n            gotToken: false,\r\n            loaded: false,\r\n        };\r\n    }\r\n\r\n    build = () => {\r\n        return this.state.platform != this.props.platform\r\n            ? this.setState(\r\n                  (state, props) => {\r\n                      state.gotToken = false;\r\n                      state.platform = props.platform;\r\n                      state.loaded = false;\r\n                      state.groupToken = undefined;\r\n                      return state;\r\n                  },\r\n                  () => {\r\n                      this.rebuild();\r\n                  }\r\n              )\r\n            : this.rebuild();\r\n    };\r\n\r\n    rebuild = () => {\r\n        return (\r\n            !this.state.gotToken &&\r\n            this.getMessages((platformMsg, setts) => {\r\n                return (\r\n                    platformMsg.groupToken &&\r\n                    this.gotToken(platformMsg.groupToken, this.reload)\r\n                );\r\n            })\r\n        );\r\n    };\r\n\r\n    openDialog = () => {\r\n        this.setState((state) => {\r\n            state.openDialog = true;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    closeDialog = () => {\r\n        this.setState((state) => {\r\n            state.openDialog = false;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    getMessages = (callback) => {\r\n        var self = this;\r\n        chrome.storage.local.get([\"settsData\"], (res) => {\r\n            var r = res;\r\n            var data = r.settsData != undefined ? r.settsData : {};\r\n            data.messages = data.messages ? data.messages : [];\r\n            data.messages[self.state.platform] = data.messages[\r\n                self.state.platform\r\n            ]\r\n                ? data.messages[self.state.platform]\r\n                : {};\r\n            try {\r\n                callback(data.messages[self.state.platform], data);\r\n            } catch (e) {\r\n                console.error(\"TradeS Error\", e);\r\n            }\r\n        });\r\n    };\r\n\r\n    updateMessages = (token, toSend, toShow, callback) => {\r\n        this.getMessages((platformMsg, setts) => {\r\n            platformMsg.groupToken = token;\r\n            platformMsg.toSend = toSend\r\n                ? toSend\r\n                : this.state.chats.filter((e) => e.selected).map((e) => e.id);\r\n            platformMsg.toShow = toShow\r\n                ? toShow\r\n                : this.state.chats.filter((e) => e.shown).map((e) => e.id);\r\n            setts.messages[this.props.platform] = platformMsg;\r\n            chrome.storage.local.set({ settsData: setts }, () => {\r\n                try {\r\n                    callback(platformMsg, setts);\r\n                } catch (e) {\r\n                    console.error(\"TradeS Error\", e);\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    gotToken = (token, callback) => {\r\n        this.getMessages((platformMsg, setts) => {\r\n            this.updateMessages(\r\n                token,\r\n                platformMsg.toSend ? platformMsg.toSend : [],\r\n                platformMsg.toShow ? platformMsg.toShow : [],\r\n                () => {\r\n                    this.setState(\r\n                        (state) => {\r\n                            state.gotToken = true;\r\n                            state.groupToken = token;\r\n                            state.openDialog = false;\r\n                            return state;\r\n                        },\r\n                        () => {\r\n                            try {\r\n                                callback(token, platformMsg, setts);\r\n                            } catch (e) {\r\n                                console.error(\"TradeS Error\", e);\r\n                            }\r\n                        }\r\n                    );\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    reload = () => {\r\n        this.setState(\r\n            (state) => {\r\n                state.loaded = false;\r\n                state.openDialog = false;\r\n                state.chats = undefined;\r\n                return state;\r\n            },\r\n            () => {\r\n                this.load();\r\n            }\r\n        );\r\n    };\r\n\r\n    load = () => {\r\n        this.getMessages((platformMsg, setts) => {\r\n            var p = {\r\n                groupToken: platformMsg.groupToken,\r\n                toSend: platformMsg.toSend ? platformMsg.toSend : [],\r\n                toShow: platformMsg.toShow ? platformMsg.toShow : [],\r\n            };\r\n            VKMethods.getGroupChats(p.groupToken, (result) => {\r\n                if (result.error) {\r\n                    alert(result);\r\n                    console.log(result);\r\n                }\r\n                this.setState(\r\n                    (state) => {\r\n                        p.toSend = p.toSend ? p.toSend : [];\r\n                        state.chats = result.response.items\r\n                            .filter((c) => {\r\n                                return c.conversation.peer.type == \"chat\";\r\n                            })\r\n                            .map((chat) => {\r\n                                return {\r\n                                    id: chat.conversation.peer.id,\r\n                                    name: chat.conversation.chat_settings.title,\r\n                                    selected: p.toSend.includes(\r\n                                        chat.conversation.peer.id\r\n                                    ),\r\n                                    shown: p.toShow.includes(\r\n                                        chat.conversation.peer.id\r\n                                    ),\r\n                                };\r\n                            });\r\n                        state.loaded = true;\r\n\r\n                        return state;\r\n                    },\r\n                    () => {\r\n                        this.updateMessages(platformMsg.groupToken);\r\n                    }\r\n                );\r\n            });\r\n        });\r\n    };\r\n\r\n    toSendChanged = (chat) => (event) => {\r\n        chat.selected = !chat.selected;\r\n        this.getMessages((platformMsg, setts) => {\r\n            this.updateMessages(\r\n                platformMsg.groupToken,\r\n                this.state.chats\r\n                    .filter((e) =>\r\n                        e.id == chat.id ? chat.selected : e.selected\r\n                    )\r\n                    .map((e) => e.id),\r\n                this.state.chats.filter((e) => e.shown).map((e) => e.id),\r\n                () => {\r\n                    this.setState((state) => {\r\n                        state.chats = state.chats.map((e) => {\r\n                            return e.id == chat.id ? chat : e;\r\n                        });\r\n                        return state;\r\n                    });\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    toShowChanged = (chat) => (event) => {\r\n        chat.shown = !chat.shown;\r\n        this.getMessages((platformMsg, setts) => {\r\n            this.updateMessages(\r\n                platformMsg.groupToken,\r\n                this.state.chats.filter((e) => e.selected).map((e) => e.id),\r\n                this.state.chats\r\n                    .filter((e) => (e.id == chat.id ? chat.shown : e.shown))\r\n                    .map((e) => e.id),\r\n                () => {\r\n                    this.setState((state) => {\r\n                        state.chats = state.chats.map((e) => {\r\n                            return e.id == chat.id ? chat : e;\r\n                        });\r\n                        return state;\r\n                    });\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n    getChatRows = () => {\r\n        return this.state.chats.map((e) => {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell>{e.name}</TableCell>\r\n                    <TableCell>\r\n                        <Switch\r\n                            checked={e.selected}\r\n                            color=\"primary\"\r\n                            onChange={this.toSendChanged(e)}\r\n                        />\r\n                    </TableCell>\r\n                    <TableCell align=\"center\">\r\n                        <Switch\r\n                            checked={e.shown}\r\n                            color=\"primary\"\r\n                            onChange={this.toShowChanged(e)}\r\n                        />\r\n                    </TableCell>\r\n                    <TableCell align=\"right\">\r\n                        <Button\r\n                            onClick={() => {\r\n                                this.getMessages((platformMsg) => {\r\n                                    VKMethods.sendMessageToGroupChat(\r\n                                        platformMsg.groupToken,\r\n                                        e.id,\r\n                                        \"Тестовое сообщение\"\r\n                                    );\r\n                                });\r\n                            }}\r\n                        >\r\n                            Тестовое сообщение\r\n                        </Button>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        });\r\n    };\r\n\r\n    getChatTable = () => {\r\n        if (this.state.loaded) {\r\n            return (\r\n                <TableContainer component={Paper}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>Чат</TableCell>\r\n                                <TableCell>Отправка</TableCell>\r\n                                <TableCell align=\"center\">\r\n                                    Отображение для Trade-S Lite\r\n                                </TableCell>\r\n                                <TableCell align=\"right\">\r\n                                    <Button onClick={this.reload}>\r\n                                        <RefreshIcon />\r\n                                    </Button>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>{this.getChatRows()}</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            );\r\n        }\r\n        return <CircularProgress style={{ padding: 20 }} />;\r\n    };\r\n\r\n    render = () => {\r\n        this.build();\r\n        if (this.state.gotToken) {\r\n            return (\r\n                <>\r\n                    <List>\r\n                        <ListItem button onClick={this.openDialog}>\r\n                            <ListItemIcon>\r\n                                <EditIcon />\r\n                            </ListItemIcon>\r\n                            <ListItemText\r\n                                primary={\r\n                                    this.state.groupToken.slice(0, 10) + \"...\"\r\n                                }\r\n                            />\r\n                        </ListItem>\r\n                    </List>\r\n                    <APIKeyDialog\r\n                        open={this.state.openDialog}\r\n                        onCancel={this.closeDialog}\r\n                        onOk={(token) => {\r\n                            this.gotToken(token, this.reload);\r\n                        }}\r\n                    />\r\n                    {this.getChatTable()}\r\n                </>\r\n            );\r\n        } else if (this.state.gotToken != undefined) {\r\n            return (\r\n                <>\r\n                    <List>\r\n                        <ListItem button onClick={this.openDialog}>\r\n                            <ListItemIcon>\r\n                                <AddIcon />\r\n                            </ListItemIcon>\r\n                            <ListItemText primary={\"Укажите API-ключ группы\"} />\r\n                        </ListItem>\r\n                    </List>\r\n                    <APIKeyDialog\r\n                        open={this.state.openDialog}\r\n                        onCancel={this.closeDialog}\r\n                        onOk={(token) => {\r\n                            this.gotToken(token, this.reload);\r\n                        }}\r\n                    />\r\n                </>\r\n            );\r\n        }\r\n        return <CircularProgress style={{ padding: 20 }} />;\r\n    };\r\n}\r\n\r\nclass PostsTab extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loaded: false,\r\n            platform: -1, //this.props.platform,\r\n            groups: undefined,\r\n        };\r\n    }\r\n\r\n    build = () => {\r\n        return this.state.platform != this.props.platform\r\n            ? this.reload()\r\n            : undefined;\r\n    };\r\n\r\n    reload = () => {\r\n        this.setState(\r\n            (state) => {\r\n                state.loaded = false;\r\n                state.groups = undefined;\r\n                state.platform = this.props.platform;\r\n                return state;\r\n            },\r\n            () => {\r\n                this.load();\r\n            }\r\n        );\r\n    };\r\n\r\n    load = () => {\r\n        this.getPosts((posts, setts) => {\r\n            var p = posts ? posts : {};\r\n            VKMethods.getMyGroups((result) => {\r\n                if (result.error) {\r\n                    alert(result);\r\n                    console.log(result);\r\n                    return;\r\n                }\r\n                this.setState((state) => {\r\n                    state.loaded = true;\r\n                    state.groups = result.response.items.map(\r\n                        (e) => {\r\n                            return {\r\n                                id: e.id,\r\n                                name: e.name,\r\n                                selected: p.toSend && p.toSend.includes(e.id),\r\n                                shown: p.toShow && p.toShow.includes(e.id),\r\n                            };\r\n                        },\r\n                        () => {\r\n                            this.updatePosts(\r\n                                this.state.groups\r\n                                    .filter((e) => e.selected)\r\n                                    .map((e) => e.id)\r\n                            );\r\n                        }\r\n                    );\r\n                    return state;\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    getPosts = (callback) => {\r\n        var cb = callback;\r\n        var self = this;\r\n        chrome.storage.local.get([\"settsData\"], (r) => {\r\n            var posts =\r\n                r.settsData.posts && r.settsData.posts[self.state.platform]\r\n                    ? r.settsData.posts[self.state.platform]\r\n                    : [];\r\n            posts =\r\n                posts.length != undefined\r\n                    ? { toSend: posts, toShow: [] }\r\n                    : posts;\r\n            try {\r\n                cb(posts, r.settsData);\r\n            } catch (e) {\r\n                console.error(\"TradeS Error\", e);\r\n            }\r\n        });\r\n    };\r\n\r\n    updatePosts = (toSend, toShow, callback) => {\r\n        this.getPosts((posts, setts) => {\r\n            var cb = callback;\r\n            setts.posts = setts.posts ? setts.posts : [];\r\n            setts.posts[this.state.platform] = {\r\n                toSend: toSend\r\n                    ? toSend\r\n                    : this.state.groups\r\n                    ? this.state.groups\r\n                          .filter((e) => e.selected)\r\n                          .map((e) => e.id)\r\n                    : [],\r\n                toShow: toShow\r\n                    ? toShow\r\n                    : this.state.groups\r\n                    ? this.state.groups.filter((e) => e.shown).map((e) => e.id)\r\n                    : [],\r\n            };\r\n            chrome.storage.local.set({ settsData: setts }, () => {\r\n                try {\r\n                    cb(setts);\r\n                } catch (e) {\r\n                    console.error(\"TradeS Error\", e);\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    toSendChanged = (group) => (event) => {\r\n        group.selected = !group.selected;\r\n\r\n        this.updatePosts(\r\n            this.state.groups\r\n                .filter((e) => (e.id == group.id ? group.selected : e.selected))\r\n                .map((e) => e.id),\r\n            undefined,\r\n            () => {\r\n                this.setState((state) => {\r\n                    state.loaded = true;\r\n                    state.groups = state.groups.map((e) => {\r\n                        return e.id == group.id ? group : e;\r\n                    });\r\n                    return state;\r\n                });\r\n            }\r\n        );\r\n    };\r\n\r\n    toShowChanged = (group) => (event) => {\r\n        group.shown = !group.shown;\r\n\r\n        this.updatePosts(\r\n            undefined,\r\n            this.state.groups\r\n                .filter((e) => (e.id == group.id ? group.shown : e.shown))\r\n                .map((e) => e.id),\r\n            () => {\r\n                this.setState((state) => {\r\n                    state.loaded = true;\r\n                    state.groups = state.groups.map((e) => {\r\n                        return e.id == group.id ? group : e;\r\n                    });\r\n                    return state;\r\n                });\r\n            }\r\n        );\r\n    };\r\n\r\n    getGropuRows = () => {\r\n        return this.state.groups.map((e) => {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell>{e.name}</TableCell>\r\n                    <TableCell>\r\n                        <Switch\r\n                            checked={e.selected}\r\n                            color=\"primary\"\r\n                            onChange={this.toSendChanged(e)}\r\n                        />\r\n                    </TableCell>\r\n                    <TableCell align=\"center\">\r\n                        <Switch\r\n                            checked={e.shown}\r\n                            color=\"primary\"\r\n                            onChange={this.toShowChanged(e)}\r\n                        />\r\n                    </TableCell>\r\n                    <TableCell align=\"right\">\r\n                        <Button\r\n                            onClick={() => {\r\n                                VKMethods.postOnMyGroupWall(\r\n                                    e.id,\r\n                                    \"Тестовый пост\"\r\n                                );\r\n                            }}\r\n                        >\r\n                            Тестовый пост\r\n                        </Button>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        });\r\n    };\r\n\r\n    render = () => {\r\n        this.build();\r\n        if (this.state.loaded) {\r\n            return (\r\n                <TableContainer component={Paper}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>Группа</TableCell>\r\n                                <TableCell>Отправка</TableCell>\r\n                                <TableCell align=\"center\">\r\n                                    Отображение для Trade-S Lite\r\n                                </TableCell>\r\n                                <TableCell align=\"right\">\r\n                                    <Button onClick={this.reload}>\r\n                                        <RefreshIcon />\r\n                                    </Button>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>{this.getGropuRows()}</TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            );\r\n        }\r\n        return <CircularProgress style={{ padding: 20 }} />;\r\n    };\r\n}\r\n\r\nexport { MessagesTab, PostsTab };\r\n","/*global chrome*/\r\n\r\nimport React from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport MenuList from \"@material-ui/core/MenuList\";\r\nimport Popper from \"@material-ui/core/Popper\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nimport AssessmentIcon from \"@material-ui/icons/Assessment\";\r\nimport UnfoldMoreIcon from \"@material-ui/icons/UnfoldMore\";\r\nimport TimelapseIcon from \"@material-ui/icons/Timelapse\";\r\nimport FormatLineSpacingIcon from \"@material-ui/icons/FormatLineSpacing\";\r\nimport DescriptionIcon from \"@material-ui/icons/Description\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\n\r\nimport API from \"./API\";\r\n\r\nimport { MessagesTab, PostsTab } from \"./TradeSTabs\";\r\nimport {\r\n    Breadcrumbs,\r\n    List,\r\n    ListItem,\r\n    ListItemAvatar,\r\n    ListItemText,\r\n    Button,\r\n    ButtonGroup,\r\n    ListItemIcon,\r\n} from \"@material-ui/core\";\r\n\r\nclass EditBtnNameDialog extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { key: props.initValue };\r\n    }\r\n\r\n    onOk = () => {\r\n        var button = this.props.btnList.state.edtButton;\r\n        var buttons = this.props.btnList.state.buttons;\r\n        var index = this.props.btnList.state.etdIndex;\r\n        button.name =\r\n            this.state.key.replace(/\\s/g, \"\") != \"\"\r\n                ? this.state.key\r\n                : button.name;\r\n        buttons[index] = button;\r\n        this.props.btnList.updateButtons(\r\n            buttons,\r\n            this.props.btnList.state.delta,\r\n            () => {\r\n                this.props.btnList.closeBtnNameDialog();\r\n            }\r\n        );\r\n    };\r\n\r\n    onCancel = () => {\r\n        this.props.btnList.closeBtnNameDialog();\r\n    };\r\n\r\n    keyChanged = (event) => {\r\n        if (event.currentTarget) {\r\n            var newKey = event.currentTarget.value;\r\n            this.setState((state) => {\r\n                state.key = newKey;\r\n                return state;\r\n            });\r\n        }\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <Dialog open={this.props.btnList.state.nameDialog}>\r\n                <DialogTitle>Введите название кноки</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        Введите отображаемое на платформах название кнопки.\r\n                    </DialogContentText>\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        label=\"Название кнопки\"\r\n                        fullWidth\r\n                        value={this.state.key}\r\n                        onChange={this.keyChanged}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={this.onCancel} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={this.onOk} color=\"primary\">\r\n                        Ok\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    };\r\n}\r\n\r\nclass DonatFrame extends React.Component {\r\n    render = () => {\r\n        return (\r\n            <>\r\n                <iframe\r\n                    src=\"https://money.yandex.ru/quickpay/shop-widget?writer=seller&targets=%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0%20Trade-S&targets-hint=&default-sum=&button-text=13&payment-type-choice=on&mobile-payment-type-choice=on&hint=&successURL=&quickpay=shop&account=4100115567443945\"\r\n                    width=\"423\"\r\n                    height=\"222\"\r\n                    frameborder=\"0\"\r\n                    allowtransparency=\"true\"\r\n                    scrolling=\"no\"\r\n                ></iframe>\r\n                <Typography>\r\n                    Поделитесь{\" \"}\r\n                    <Link\r\n                        target=\"_blank\"\r\n                        href=\"https://money.yandex.ru/quickpay/shop-widget?writer=seller&targets=%D0%9F%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0%20Trade-S&targets-hint=&default-sum=&button-text=13&payment-type-choice=on&mobile-payment-type-choice=on&comment=on&hint=&successURL=&quickpay=shop&account=4100115567443945\"\r\n                    >\r\n                        ссылкой\r\n                    </Link>{\" \"}\r\n                    для большей поддержки :)\r\n                </Typography>\r\n            </>\r\n        );\r\n    };\r\n}\r\n\r\nclass TradeSContent extends React.Component {\r\n    render = () => {\r\n        switch (this.props.currentPage) {\r\n            case 0:\r\n                return <MessagesContent />;\r\n            case 1:\r\n                return <PostsContent />;\r\n            case 2:\r\n                return <FormatContent />;\r\n            case 3:\r\n                return <AccountContent />;\r\n            default:\r\n                return (\r\n                    <>\r\n                        <Paper style={{ padding: 40, margin: 40 }}>\r\n                            <Typography>\r\n                                Вас приветствует расширение-помощник для\r\n                                автоматической отправки сигналов с платформ в\r\n                                социальные сети и мессенджеры\r\n                            </Typography>\r\n                            <Typography>\r\n                                Для настройки расширения нажмите меню\r\n                                <Button>\r\n                                    <MenuIcon />\r\n                                </Button>\r\n                            </Typography>\r\n                        </Paper>\r\n                        <Divider />\r\n                        <div style={{ padding: 40 }}>\r\n                            <DonatFrame />\r\n                        </div>\r\n                    </>\r\n                );\r\n        }\r\n    };\r\n}\r\n\r\nfunction OPTabs(props) {\r\n    const [value, setValue] = React.useState(0);\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n        props.tabChanged(newValue);\r\n    };\r\n    return (\r\n        <Paper>\r\n            <Tabs value={value} onChange={handleChange}>\r\n                <Tab label=\"Olymp Trade\" />\r\n                <Tab label=\"Pocket Option\" />\r\n            </Tabs>\r\n        </Paper>\r\n    );\r\n}\r\n\r\nclass MessagesContent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { index: 0 };\r\n    }\r\n\r\n    tabChanged = (index) => {\r\n        this.setState((state) => {\r\n            state.index = index;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    currentTab = () => {\r\n        return <MessagesTab platform={this.state.index} />;\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <>\r\n                <OPTabs tabChanged={this.tabChanged} />\r\n                {this.currentTab()}\r\n            </>\r\n        );\r\n    };\r\n}\r\n\r\nclass PostsContent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { index: 0 };\r\n    }\r\n\r\n    tabChanged = (index) => {\r\n        this.setState((state) => {\r\n            state.index = index;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <>\r\n                <OPTabs tabChanged={this.tabChanged} />\r\n                <PostsTab platform={this.state.index} />\r\n            </>\r\n        );\r\n    };\r\n}\r\n\r\nclass FormatContent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { loaded: false, buttons: undefined, nameDialog: false };\r\n        this.load();\r\n    }\r\n\r\n    getButtons = (callback) => {\r\n        var self = this;\r\n        var cb = callback;\r\n        chrome.storage.local.get([\"buttons\", \"timeDelta\"], (r) => {\r\n            var delta = r.timeDelta ? r.timeDelta : 0;\r\n            var buttons = r.buttons\r\n                ? r.buttons\r\n                : [\r\n                      {\r\n                          name: \"Сигнал №1\",\r\n                          items: [\r\n                              { type: \"ass\" },\r\n                              { type: \"text\", text: \"готовим\" },\r\n                          ],\r\n                      },\r\n                      {\r\n                          name: \"Сигнал №2\",\r\n                          items: [\r\n                              { type: \"ass\" },\r\n                              { type: \"exp\" },\r\n                              { type: \"dir\" },\r\n                              { type: \"text\", text: \"СТАВИМ\" },\r\n                          ],\r\n                      },\r\n                  ];\r\n            try {\r\n                cb(buttons, delta);\r\n            } catch (e) {}\r\n        });\r\n    };\r\n\r\n    updateButtons = (buttons, delta, callback) => {\r\n        var cb = callback;\r\n        if (delta != null) {\r\n            chrome.storage.local.set(\r\n                { buttons: buttons, timeDelta: delta },\r\n                () => {\r\n                    try {\r\n                        cb(buttons, delta);\r\n                    } catch (e) {}\r\n                }\r\n            );\r\n        } else {\r\n            chrome.storage.local.set({ buttons: buttons }, () => {\r\n                try {\r\n                    cb(buttons);\r\n                } catch (e) {}\r\n            });\r\n        }\r\n    };\r\n\r\n    load = () => {\r\n        this.getButtons((buttons, delta) => {\r\n            this.setState((state) => {\r\n                state.timeDelta = delta;\r\n                state.buttons = buttons;\r\n                state.loaded = true;\r\n                return state;\r\n            });\r\n        });\r\n    };\r\n\r\n    addButton = () => {\r\n        this.getButtons((buttons) => {\r\n            buttons.push({ name: `Сигнал №${buttons.length + 1}`, items: [] });\r\n            this.updateButtons(buttons, undefined, (buttons) => {\r\n                this.setState((state) => {\r\n                    state.buttons = buttons;\r\n                    return state;\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    openBtnNameDialog = (button, index) => () => {\r\n        this.setState((state) => {\r\n            state.edtButton = button;\r\n            state.etdIndex = index;\r\n            state.nameDialog = true;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    closeBtnNameDialog = () => {\r\n        this.setState((state) => {\r\n            state.edtButton = undefined;\r\n            state.etdIndex = undefined;\r\n            state.nameDialog = false;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    deleteButton = (index) => {\r\n        this.getButtons((buttons) => {\r\n            buttons.splice(index, 1);\r\n            this.updateButtons(buttons, undefined, (buttons) => {\r\n                this.setState((state) => {\r\n                    state.buttons = buttons;\r\n                    return state;\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    getFormatAvatar = (type) => {\r\n        switch (type) {\r\n            case \"ass\":\r\n                return <AssessmentIcon />;\r\n            case \"dir\":\r\n                return <UnfoldMoreIcon />;\r\n            case \"exp\":\r\n                return <TimelapseIcon />;\r\n            case \"stn\":\r\n                return <FormatLineSpacingIcon />;\r\n            case \"stv\":\r\n                return <FormatLineSpacingIcon />;\r\n            case \"plf\":\r\n                return <TimelineIcon />;\r\n            case \"text\":\r\n                return <DescriptionIcon />;\r\n        }\r\n    };\r\n\r\n    getFormatText = (format) => {\r\n        switch (format.type) {\r\n            case \"ass\":\r\n                return \"Пара\";\r\n            case \"dir\":\r\n                return \"Направление\";\r\n            case \"exp\":\r\n                return \"Экспирация\";\r\n            case \"stn\":\r\n                return \"Номер страйк-цены\";\r\n            case \"stv\":\r\n                return \"Значение страйк-цены\";\r\n            case \"plf\":\r\n                return \"Платформа\";\r\n            case \"text\":\r\n                return \"Текст\";\r\n        }\r\n    };\r\n\r\n    formatTypes = () => {\r\n        return [\"ass\", \"dir\", \"exp\", \"stn\", \"stv\", \"plf\", \"text\"];\r\n    };\r\n\r\n    textFormatChanged = (formatIndex, buttonIndex) => (event) => {\r\n        var v = event.currentTarget.value;\r\n        var buttons = this.state.buttons;\r\n        buttons[buttonIndex].items[formatIndex].text = v;\r\n        this.setState(\r\n            (state) => {\r\n                state.buttons = buttons;\r\n                return state;\r\n            },\r\n            () => {\r\n                this.updateButtons(buttons);\r\n            }\r\n        );\r\n    };\r\n\r\n    getFormatContent = (format, formatIndex, buttonIndex) => {\r\n        if (format.type == \"text\") {\r\n            return (\r\n                <TextField\r\n                    value={format.text}\r\n                    size=\"small\"\r\n                    onChange={this.textFormatChanged(formatIndex, buttonIndex)}\r\n                ></TextField>\r\n            );\r\n        }\r\n        return this.getFormatText(format);\r\n    };\r\n\r\n    closeMenus = () => {\r\n        this.setState((state) => {\r\n            state.buttonMenus = undefined;\r\n            state.ref = undefined;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    onAddItem = (type, button, index) => (event) => {\r\n        button.items.push(\r\n            type == \"text\" ? { type: type, text: \"\" } : { type: type }\r\n        );\r\n        this.setState(\r\n            (state) => {\r\n                state.buttons[index] = button;\r\n                state.buttonMenus = undefined;\r\n                state.ref = undefined;\r\n                return state;\r\n            },\r\n            () => {\r\n                this.updateButtons(this.state.buttons);\r\n            }\r\n        );\r\n    };\r\n\r\n    onDeleteItem = (itemIndex, button, index) => (event) => {\r\n        button.items.splice(itemIndex, 1);\r\n        this.setState(\r\n            (state) => {\r\n                state.buttons[index] = button;\r\n                state.buttonMenus = undefined;\r\n                return state;\r\n            },\r\n            () => {\r\n                this.updateButtons(this.state.buttons);\r\n            }\r\n        );\r\n    };\r\n\r\n    openAddItemMenu = (index) => (event) => {\r\n        var t = event.currentTarget;\r\n        this.setState((state) => {\r\n            state.buttonMenus = {};\r\n            state.buttonMenus[index] = { addItem: true };\r\n            state.ref = t;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    itemAdder = (button, index) => {\r\n        var ref = React.createRef();\r\n        return [\r\n            <Button\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                onClick={this.openAddItemMenu(index)}\r\n            >\r\n                <AddIcon />\r\n            </Button>,\r\n            <Popper\r\n                open={\r\n                    this.state.buttonMenus &&\r\n                    this.state.buttonMenus[index] &&\r\n                    this.state.buttonMenus[index].addItem\r\n                }\r\n                anchorEl={this.state.ref ? this.state.ref : null}\r\n                role={undefined}\r\n                transition\r\n            >\r\n                <Paper>\r\n                    <ClickAwayListener onClickAway={this.closeMenus}>\r\n                        <MenuList\r\n                            autoFocusItem={\r\n                                this.state.buttonMenus &&\r\n                                this.state.buttonMenus[index] &&\r\n                                this.state.buttonMenus[index].addItem\r\n                            }\r\n                        >\r\n                            {this.formatTypes().map((t) => {\r\n                                return (\r\n                                    <MenuItem\r\n                                        onClick={this.onAddItem(\r\n                                            t,\r\n                                            button,\r\n                                            index\r\n                                        )}\r\n                                    >\r\n                                        {this.getFormatText({\r\n                                            type: t,\r\n                                        })}\r\n                                    </MenuItem>\r\n                                );\r\n                            })}\r\n                        </MenuList>\r\n                    </ClickAwayListener>\r\n                </Paper>\r\n            </Popper>,\r\n        ];\r\n    };\r\n\r\n    getButtonConstructor = (button, index) => {\r\n        var preview = ButtonFormat.fromItems(\r\n            this.state.buttons[index].items\r\n        ).restore(\"EUR USD\", \"вверх\", \"1 мин.\", \"0\", \"1.154\", \"Olymp Trade\");\r\n        return (\r\n            <List>\r\n                <ListItem>\r\n                    <ButtonGroup variant=\"text\">\r\n                        <Button onClick={this.openBtnNameDialog(button, index)}>\r\n                            <EditIcon />\r\n                            {button.name}\r\n                        </Button>\r\n                        <Button\r\n                            onClick={() => {\r\n                                this.deleteButton(index);\r\n                            }}\r\n                        >\r\n                            <DeleteIcon />\r\n                        </Button>\r\n                    </ButtonGroup>\r\n                </ListItem>\r\n                <ListItem>\r\n                    <Breadcrumbs style={{ width: \"100%\" }} separator=\"\">\r\n                        {button.items.map((e, i) => {\r\n                            return (\r\n                                <ButtonGroup size=\"small\" variant=\"outlined\">\r\n                                    <Button>\r\n                                        {this.getFormatAvatar(e.type)}\r\n                                        {this.getFormatContent(e, i, index)}\r\n                                    </Button>\r\n                                    <Button\r\n                                        onClick={this.onDeleteItem(\r\n                                            i,\r\n                                            button,\r\n                                            index\r\n                                        )}\r\n                                    >\r\n                                        <DeleteIcon />\r\n                                    </Button>\r\n                                </ButtonGroup>\r\n                            );\r\n                        })}\r\n                        {this.itemAdder(button, index)}\r\n                    </Breadcrumbs>\r\n                </ListItem>\r\n                <ListItem>\r\n                    <Button>Предпросмотр</Button>\r\n                </ListItem>\r\n                <ListItem>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        style={{ width: \"100%\" }}\r\n                        value={preview}\r\n                    ></TextField>\r\n                </ListItem>\r\n            </List>\r\n        );\r\n    };\r\n\r\n    getButtonsList = () => {\r\n        return (\r\n            <div>\r\n                <EditBtnNameDialog btnList={this}></EditBtnNameDialog>\r\n                <List>\r\n                    {this.state.buttons.map((e, i) => {\r\n                        return (\r\n                            <>\r\n                                <Divider />\r\n                                <ListItem\r\n                                    style={{ margin: 5, background: \"#ffffff\" }}\r\n                                >\r\n                                    {this.getButtonConstructor(e, i)}\r\n                                </ListItem>\r\n                                <Divider />\r\n                            </>\r\n                        );\r\n                    })}\r\n                    <Divider />\r\n                    <ListItem>\r\n                        <Button\r\n                            size=\"large\"\r\n                            style={{ width: \"100%\" }}\r\n                            variant=\"outlined\"\r\n                            onClick={this.addButton}\r\n                        >\r\n                            <AddIcon />\r\n                        </Button>\r\n                    </ListItem>\r\n                </List>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    setTimeDelta = (event, newValue) => {\r\n        var v = newValue;\r\n        this.updateButtons(this.state.buttons, v, () => {\r\n            this.setState((state) => {\r\n                state.timeDelta = v;\r\n                return state;\r\n            });\r\n        });\r\n    };\r\n\r\n    valueLabelFormat = (value) => {\r\n        return parseInt(value) >= 0 ? `+${value} ч.` : `${value} ч.`;\r\n    };\r\n\r\n    getMarks = () => {\r\n        return [...Array(25).keys()].map((e, i) => {\r\n            return {\r\n                value: i - 12,\r\n                label: i - 12 >= 0 ? `+${i - 12} ч.` : `${i - 12} ч.`,\r\n            };\r\n        });\r\n    };\r\n\r\n    render = () => {\r\n        if (this.state.loaded) {\r\n            return (\r\n                <>\r\n                    <Paper style={{ padding: 40, marginLeft: 5 }}>\r\n                        <Typography>\r\n                            Смещение времени в отсылаемом сигнале (для\r\n                            экспирации к конкретному времени)\r\n                        </Typography>\r\n                        <Slider\r\n                            value={this.state.timeDelta}\r\n                            step={1}\r\n                            marks={this.getMarks()}\r\n                            min={-12}\r\n                            max={12}\r\n                            onChange={this.setTimeDelta}\r\n                            style={{ paddingTop: 20, paddingBottom: 20 }}\r\n                            aria-labelledby=\"discrete-slider\"\r\n                        />\r\n                    </Paper>\r\n                    {this.getButtonsList()}\r\n                </>\r\n            );\r\n        }\r\n        return <></>;\r\n    };\r\n}\r\n\r\nclass AccountContent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loaded: false,\r\n        };\r\n    }\r\n\r\n    load = () => {\r\n        if (!this.state.loaded)\r\n            API.getMyData((user) => {\r\n                this.setState((state) => {\r\n                    state.key = user.key;\r\n                    state.loaded = true;\r\n                    return state;\r\n                });\r\n            });\r\n    };\r\n\r\n    render = () => {\r\n        this.load();\r\n        if (this.state.loaded) {\r\n            return (\r\n                <>\r\n                    <Card\r\n                        style={{\r\n                            margin: 40,\r\n                            width: 423,\r\n                        }}\r\n                    >\r\n                        <CardHeader\r\n                            avatar={<Avatar src=\"icon_128.png\" />}\r\n                            title={\r\n                                <Typography variant=\"h5\">Trade-S</Typography>\r\n                            }\r\n                            subheader=\"Деавторизация\"\r\n                        />\r\n                        <CardActions style={{ padding: 20 }}>\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={() => {\r\n                                    chrome.storage.local.clear(() => {\r\n                                        window.location.reload();\r\n                                    });\r\n                                }}\r\n                            >\r\n                                Выйти\r\n                            </Button>\r\n                        </CardActions>\r\n                    </Card>\r\n\r\n                    <Divider />\r\n                    <Paper style={{ margin: 40, padding: 40 }}>\r\n                        <TextField\r\n                            style={{ width: \"100%\" }}\r\n                            label=\"Ключ для Trade-S Lite\"\r\n                            value={this.state.key}\r\n                        ></TextField>\r\n                    </Paper>\r\n                    <Divider />\r\n                    <div style={{ padding: 40 }}>\r\n                        <DonatFrame />\r\n                    </div>\r\n                </>\r\n            );\r\n        }\r\n        return <CircularProgress style={{ padding: 20 }} />;\r\n    };\r\n}\r\n\r\nclass ButtonFormat {\r\n    constructor() {\r\n        this.items = [\r\n            { type: \"ass\" },\r\n            { type: \"exp\" },\r\n            { type: \"dir\" },\r\n            { type: \"text\", text: \"СТАВИМ\" },\r\n        ];\r\n    }\r\n\r\n    restore = (ass, dir, exp, stn, stv, plf) => {\r\n        return this.items\r\n            .map((e) => {\r\n                switch (e.type) {\r\n                    case \"ass\":\r\n                        return ass;\r\n                    case \"dir\":\r\n                        return dir;\r\n                    case \"exp\":\r\n                        return exp;\r\n                    case \"stn\":\r\n                        return stn;\r\n                    case \"stv\":\r\n                        return stv;\r\n                    case \"plf\":\r\n                        return plf;\r\n                    case \"text\":\r\n                        return e.text;\r\n                }\r\n            })\r\n            .join(\" \");\r\n    };\r\n\r\n    add = (type, text) => {\r\n        this.items.push(\r\n            type == text ? { type: type, text: text } : { type: type }\r\n        );\r\n    };\r\n\r\n    insert = (index, type, text) => {\r\n        this.items[index] =\r\n            type == text ? { type: type, text: text } : { type: type };\r\n    };\r\n\r\n    delete = (index) => {\r\n        this.items.splice(index);\r\n    };\r\n\r\n    update = (index, type, text) => {\r\n        this.items[index] =\r\n            type == text ? { type: type, text: text } : { type: type };\r\n    };\r\n\r\n    static fromItems = (items) => {\r\n        var b = new ButtonFormat();\r\n        b.items = items;\r\n        return b;\r\n    };\r\n}\r\n\r\nexport default TradeSContent;\r\n","/*global chrome*/\r\n\r\nimport React from \"react\";\r\nimport SwipeableDrawer from \"@material-ui/core/SwipeableDrawer\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport EmailIcon from \"@material-ui/icons/Email\";\r\nimport WallpaperIcon from \"@material-ui/icons/Wallpaper\";\r\nimport AccountBoxIcon from \"@material-ui/icons/AccountBox\";\r\nimport RadioButtonCheckedIcon from \"@material-ui/icons/RadioButtonChecked\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport TradeSContent from \"./TradeSContent\";\r\nimport API from \"./API\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nclass CenterView extends React.Component {\r\n    render() {\r\n        return (\r\n            <div\r\n                style={{\r\n                    position: \"absolute\",\r\n                    left: \"50%\",\r\n                    top: \"50%\",\r\n                    transform: \"translate(-50%, -50%)\",\r\n                }}\r\n            >\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass Page extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // this.state = { open: false, currentPage: 4 };\r\n\r\n        this.state = { registered: false, logined: false };\r\n        this.loadAccount();\r\n        var self = this;\r\n\r\n        chrome.runtime.onMessage.addListener(\r\n            (request, sender, sendResponse) => {\r\n                if (\r\n                    request.userId &&\r\n                    request.accessToken &&\r\n                    request.extension == \"TradeS\"\r\n                ) {\r\n                    sendResponse({});\r\n                    self.loadAccount();\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    loadAccount = () => {\r\n        var self = this;\r\n        chrome.storage.local.get([\"userId\", \"settsData\"], (res) => {\r\n            var r = res;\r\n            if (r.settsData && r.settsData.accessToken && r.userId) {\r\n                chrome.storage.local.onChanged.addListener((r) => {\r\n                    r.settsData && API.uploadMySetts();\r\n                });\r\n                this.loadData(r.userId, r.settsData);\r\n            } else {\r\n                r.settsData = r.settsData ? r.settsData : {};\r\n                chrome.storage.local.set({ settsData: r.settsData }, () => {\r\n                    self.setState(\r\n                        (state) => {\r\n                            state.logined = true;\r\n                            state.registered = false;\r\n                            state.accessToken = undefined;\r\n                            state.userId = undefined;\r\n                            return state;\r\n                        },\r\n                        () => {}\r\n                    );\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    loadData = (userId, setts) => {\r\n        var s = setts;\r\n        var self = this;\r\n        self.setState(\r\n            (state) => {\r\n                state.logined = true;\r\n            },\r\n            () => {\r\n                chrome.storage.local.set({ TRSVkLogin: false }, () => {\r\n                    API.downloadMySetts(() => {\r\n                        self.setState((state) => {\r\n                            state.registered = true;\r\n                            state.accessToken = s.accessToken;\r\n                            state.userId = userId;\r\n                            return state;\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n        );\r\n    };\r\n\r\n    register = () => {\r\n        chrome.storage.local.set({ \"TRSVkLogin\": true }, () => {\r\n            window.open(\r\n                \"https://oauth.vk.com/authorize?client_id=6290333&scope=wall,offline&redirect_uri=http://oauth.vk.com/blank.html&response_type=token&v=5.92\"\r\n            );\r\n        });\r\n    };\r\n\r\n    onPanelSwitch = (open) => (event) => {\r\n        if (open === null) {\r\n            open = !this.state.open;\r\n        }\r\n        if (\r\n            event &&\r\n            event.type === \"keydown\" &&\r\n            (event.key === \"Tab\" || event.key === \"Shift\")\r\n        ) {\r\n            return;\r\n        }\r\n        this.setState((state) => {\r\n            state.open = open;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    home = () => {\r\n        this.setState((state) => {\r\n            state.currentPage = 4;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    authContent = (logined) => {\r\n        if (!logined) {\r\n            return <CircularProgress color=\"#e0f7fa\" />;\r\n        }\r\n        return (\r\n            <Card\r\n                style={{\r\n                    width: 450,\r\n                }}\r\n            >\r\n                <CardHeader\r\n                    avatar={<Avatar src=\"icon_128.png\" />}\r\n                    title={<Typography variant=\"h5\">Trade-S</Typography>}\r\n                    subheader=\"Авторизация\"\r\n                />\r\n                <CardContent\r\n                    style={{\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                    }}\r\n                >\r\n                    <Typography>\r\n                        Для использования расширения необходимо пройти\r\n                        авторизацию с помощью ВКонтакте.\r\n                    </Typography>\r\n                </CardContent>\r\n                <CardActions\r\n                    style={{\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                    }}\r\n                >\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={this.register}\r\n                    >\r\n                        Авторизироваться ВКонтакте\r\n                    </Button>\r\n                </CardActions>\r\n            </Card>\r\n        );\r\n    };\r\n\r\n    render = () => {\r\n        if (!this.state.registered) {\r\n            return (\r\n                <Backdrop open={true} style={{ color: \"#e3e5fc\" }}>\r\n                    <CenterView>\r\n                        {this.authContent(this.state.logined)}\r\n                    </CenterView>\r\n                </Backdrop>\r\n            );\r\n        }\r\n        return (\r\n            <>\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <IconButton\r\n                            edge=\"start\"\r\n                            color=\"inherit\"\r\n                            aria-label=\"menu\"\r\n                            onClick={this.onPanelSwitch(true)}\r\n                        >\r\n                            <MenuIcon />\r\n                        </IconButton>\r\n                        <Avatar\r\n                            src=\"icon_128.png\"\r\n                            style={{ cursor: \"pointer\" }}\r\n                            onClick={this.home}\r\n                        />\r\n                        <Typography\r\n                            style={{ cursor: \"pointer\", marginLeft: 10 }}\r\n                            onClick={this.home}\r\n                            variant=\"h6\"\r\n                        >\r\n                            Trade-S\r\n                        </Typography>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <SwipeableDrawer\r\n                    open={this.state.open}\r\n                    onOpen={this.onPanelSwitch(true)}\r\n                    onClose={this.onPanelSwitch(false)}\r\n                >\r\n                    <PageMenu page={this} />\r\n                </SwipeableDrawer>\r\n                <TradeSPath currentPage={this.state.currentPage} page={this} />\r\n                <TradeSContent currentPage={this.state.currentPage} />\r\n            </>\r\n        );\r\n    };\r\n}\r\n\r\nclass TradeSPath extends React.Component {\r\n    home = () => {\r\n        this.props.page.setState((state) => {\r\n            state.currentPage = 4;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <Breadcrumbs style={{ padding: 20 }} aria-label=\"breadcrumb\">\r\n                <Link style={{ cursor: \"pointer\" }} onClick={this.home}>\r\n                    Trade-S\r\n                </Link>\r\n                <Typography style={{ cursor: \"default\" }}>\r\n                    {\r\n                        [\r\n                            \"Сообщения в чатах группы\",\r\n                            \"Пост на стене группы\",\r\n                            \"Формат сигналов\",\r\n                            \"Дополнительно\",\r\n                            \"\",\r\n                        ][this.props.currentPage]\r\n                    }\r\n                </Typography>\r\n            </Breadcrumbs>\r\n        );\r\n    };\r\n}\r\n\r\nclass PageMenu extends React.Component {\r\n    openMessages = () => {\r\n        this.props.page.setState((state) => {\r\n            state.open = false;\r\n            state.currentPage = 0;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    openPosts = () => {\r\n        this.props.page.setState((state) => {\r\n            state.open = false;\r\n            state.currentPage = 1;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    openFormat = () => {\r\n        this.props.page.setState((state) => {\r\n            state.open = false;\r\n            state.currentPage = 2;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    openAccount = () => {\r\n        this.props.page.setState((state) => {\r\n            state.open = false;\r\n            state.currentPage = 3;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <>\r\n                <List style={{ marginTop: -8 }}>\r\n                    <ListItem\r\n                        style={{\r\n                            padding: 16,\r\n                            paddingLeft: 25,\r\n                            background: \"#3f51b5\",\r\n                            color: \"white\",\r\n                        }}\r\n                        button\r\n                        key={\"Меню настроек\"}\r\n                        onClick={this.props.page.onPanelSwitch(false)}\r\n                    >\r\n                        <ListItemIcon>\r\n                            <ArrowBackIcon style={{ color: \"white\" }} />\r\n                        </ListItemIcon>\r\n                        <ListItemText\r\n                            style={{ marginLeft: -20 }}\r\n                            primary={\"Меню настроек\"}\r\n                        />\r\n                    </ListItem>\r\n                </List>\r\n                <Divider />\r\n                <label style={{ textAlign: \"center\" }}>\r\n                    Отправка сигналов в ВК\r\n                </label>\r\n                <Divider />\r\n                <List>\r\n                    <ListItem\r\n                        button\r\n                        onClick={this.openMessages}\r\n                        key={\"Сообщения в чатах группы\"}\r\n                    >\r\n                        <ListItemIcon>\r\n                            <EmailIcon />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={\"Сообщения в чатах группы\"} />\r\n                    </ListItem>\r\n                    <ListItem\r\n                        button\r\n                        onClick={this.openPosts}\r\n                        key={\"Пост на стене группы\"}\r\n                    >\r\n                        <ListItemIcon>\r\n                            <WallpaperIcon />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={\"Пост на стене группы\"} />\r\n                    </ListItem>\r\n                </List>\r\n\r\n                <Divider />\r\n                <label style={{ textAlign: \"center\" }}>Другие настройки</label>\r\n                <Divider />\r\n                <List>\r\n                    <ListItem\r\n                        button\r\n                        onClick={this.openFormat}\r\n                        key={\"Формат сигналов\"}\r\n                    >\r\n                        <ListItemIcon>\r\n                            <RadioButtonCheckedIcon />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={\"Формат сигналов\"} />\r\n                    </ListItem>\r\n                    <ListItem\r\n                        button\r\n                        onClick={this.openAccount}\r\n                        key={\"Дополнительно\"}\r\n                    >\r\n                        <ListItemIcon>\r\n                            <AccountBoxIcon />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={\"Дополнительно\"} />\r\n                    </ListItem>\r\n                </List>\r\n            </>\r\n        );\r\n    };\r\n}\r\n\r\nexport default Page;\r\n","import React from 'react';\nimport Page from './MainPage'\n\nfunction App() {\n  return (\n    <Page/>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}