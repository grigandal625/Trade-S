{"ast":null,"code":"import _assertThisInitialized from\"E:\\\\Olympcepy\\\\pro\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"E:\\\\Olympcepy\\\\pro\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _inherits from\"E:\\\\Olympcepy\\\\pro\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\Olympcepy\\\\pro\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";/*global chrome*/import React from\"react\";import CircularProgress from\"@material-ui/core/CircularProgress\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import ListItemIcon from\"@material-ui/core/ListItemIcon\";import ListItemText from\"@material-ui/core/ListItemText\";import EditIcon from\"@material-ui/icons/Edit\";import AddIcon from\"@material-ui/icons/Add\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogContentText from\"@material-ui/core/DialogContentText\";import DialogTitle from\"@material-ui/core/DialogTitle\";import VKMethods from\"./VKMethods\";var APIKeyDialog=/*#__PURE__*/function(_React$Component){_inherits(APIKeyDialog,_React$Component);var _super=_createSuper(APIKeyDialog);function APIKeyDialog(props){var _this;_classCallCheck(this,APIKeyDialog);_this=_super.call(this,props);_this.onOk=function(){_this.props.onOk(_this.state.key);};_this.onCancel=function(){_this.props.onCancel();};_this.keyChanged=function(event){if(event.currentTarget){var newKey=event.currentTarget.value;_this.setState(function(state){state.key=newKey;return state;});}};_this.render=function(){return/*#__PURE__*/React.createElement(Dialog,{open:_this.props.open,onClose:_this.switchDialog,\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,null,\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 API-\\u043A\\u043B\\u044E\\u0447 \\u0433\\u0440\\u0443\\u043F\\u043F\\u044B\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(DialogContentText,null,\"\\u0414\\u043B\\u044F \\u043E\\u0431\\u0435\\u0441\\u043F\\u0435\\u0447\\u0435\\u043D\\u0438\\u044F \\u0432\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E\\u0441\\u0442\\u0438 \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043A\\u0438 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439 \\u0432 \\u0447\\u0430\\u0442\\u044B \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C API-\\u043A\\u043B\\u044E\\u0447 \\u0433\\u0440\\u0443\\u043F\\u043F\\u044B.\"),/*#__PURE__*/React.createElement(TextField,{autoFocus:true,margin:\"dense\",label:\"API-\\u043A\\u043B\\u044E\\u0447 \\u0433\\u0440\\u0443\\u043F\\u043F\\u044B\",fullWidth:true,onChange:_this.keyChanged})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:_this.onCancel,color:\"primary\"},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{onClick:_this.onOk,color:\"primary\"},\"Ok\")));};_this.state={key:\"\"};return _this;}return APIKeyDialog;}(React.Component);var MessagesTab=/*#__PURE__*/function(_React$Component2){_inherits(MessagesTab,_React$Component2);var _super2=_createSuper(MessagesTab);function MessagesTab(props){var _this2;_classCallCheck(this,MessagesTab);_this2=_super2.call(this,props);_this2.openDialog=function(){console.log(\"opening\");_this2.setState(function(state){state.openDialog=true;return state;});};_this2.closeDialog=function(){_this2.setState(function(state){state.openDialog=false;return state;});};_this2.loadChats=function(){var self=_assertThisInitialized(_this2);chrome.storage.local.get([\"settsData\"],function(r){console.log(r);console.log('platform ',self.props.platform);if(r.settsData!=undefined&&r.settsData.messages&&r.settsData.messages[_this2.props.platform]&&r.settsData.messages[_this2.props.platform].groupToken){self.gotToken(r.settsData.messages[_this2.props.platform].groupToken);}else{self.setState(function(state){state.hasToken=false;state.groupToken=undefined;return state;});}});};_this2.gotToken=function(token){var self=_assertThisInitialized(_this2);var t=token;chrome.storage.local.get([\"settsData\"],function(r){var data=r.settsData!=undefined?r.settsData:{};data.messages=data.messages?data.messages:[];data.messages[self.props.platform]=data.messages[self.props.platform]?data.messages[self.props.platform]:{};data.messages[self.props.platform].groupToken=t;chrome.storage.local.set({settsData:data},function(){self.setState(function(state){state.hasToken=true;state.groupToken=t;state.openDialog=false;return state;});});});};_this2.render=function(){_this2.loadChats();if(_this2.state.hasToken==undefined){return/*#__PURE__*/React.createElement(CircularProgress,{style:{padding:20}});}else if(_this2.state.hasToken){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(List,null,/*#__PURE__*/React.createElement(ListItem,{button:true,onClick:_this2.openDialog},/*#__PURE__*/React.createElement(ListItemIcon,null,/*#__PURE__*/React.createElement(EditIcon,null)),/*#__PURE__*/React.createElement(ListItemText,{primary:_this2.state.groupToken.slice(0,5)+\"...\"}))),/*#__PURE__*/React.createElement(APIKeyDialog,{open:_this2.state.openDialog,onCancel:_this2.closeDialog,onOk:_this2.gotToken}),/*#__PURE__*/React.createElement(ChatSelector,{platfrom:_this2.props.platform,token:_this2.state.groupToken}));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(List,null,/*#__PURE__*/React.createElement(ListItem,{button:true,onClick:_this2.openDialog},/*#__PURE__*/React.createElement(ListItemIcon,null,/*#__PURE__*/React.createElement(AddIcon,null)),/*#__PURE__*/React.createElement(ListItemText,{primary:\"Укажите API-ключ группы\"}))),/*#__PURE__*/React.createElement(APIKeyDialog,{open:_this2.state.openDialog,onCancel:_this2.closeDialog,onOk:_this2.gotToken}));}};_this2.state={openDialog:false};return _this2;}return MessagesTab;}(React.Component);var ChatSelector=/*#__PURE__*/function(_React$Component3){_inherits(ChatSelector,_React$Component3);var _super3=_createSuper(ChatSelector);function ChatSelector(props){var _this3;_classCallCheck(this,ChatSelector);_this3=_super3.call(this,props);_this3.render=function(){if(_this3.state.loaded){return/*#__PURE__*/React.createElement(\"div\",null,\"test\");}else{return/*#__PURE__*/React.createElement(CircularProgress,{style:{padding:20}});}};_this3.state={loaded:false};return _this3;}return ChatSelector;}(React.Component);export default MessagesTab;","map":{"version":3,"sources":["E:/Olympcepy/pro/src/OlympcepyTabs.js"],"names":["React","CircularProgress","List","ListItem","ListItemIcon","ListItemText","EditIcon","AddIcon","Button","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","VKMethods","APIKeyDialog","props","onOk","state","key","onCancel","keyChanged","event","currentTarget","newKey","value","setState","render","open","switchDialog","Component","MessagesTab","openDialog","console","log","closeDialog","loadChats","self","chrome","storage","local","get","r","platform","settsData","undefined","messages","groupToken","gotToken","hasToken","token","t","data","set","padding","slice","ChatSelector","loaded"],"mappings":"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","sourcesContent":["/*global chrome*/\r\n\r\nimport React from \"react\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nimport VKMethods from \"./VKMethods\";\r\n\r\nclass APIKeyDialog extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { key: \"\" };\r\n    }\r\n\r\n    onOk = () => {\r\n        this.props.onOk(this.state.key);\r\n    };\r\n\r\n    onCancel = () => {\r\n        this.props.onCancel();\r\n    };\r\n\r\n    keyChanged = (event) => {\r\n        if (event.currentTarget) {\r\n            var newKey = event.currentTarget.value;\r\n            this.setState((state) => {\r\n                state.key = newKey;\r\n                return state;\r\n            });\r\n        }\r\n    };\r\n\r\n    render = () => {\r\n        return (\r\n            <Dialog\r\n                open={this.props.open}\r\n                onClose={this.switchDialog}\r\n                aria-labelledby=\"form-dialog-title\"\r\n            >\r\n                <DialogTitle>Введите API-ключ группы</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        Для обеспечения возможности отправки сообщений в чаты\r\n                        необходимо указать API-ключ группы.\r\n                    </DialogContentText>\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        label=\"API-ключ группы\"\r\n                        fullWidth\r\n                        onChange={this.keyChanged}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={this.onCancel} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={this.onOk} color=\"primary\">\r\n                        Ok\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    };\r\n}\r\n\r\nclass MessagesTab extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { openDialog: false };\r\n    }\r\n\r\n    openDialog = () => {\r\n        console.log(\"opening\");\r\n        this.setState((state) => {\r\n            state.openDialog = true;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    closeDialog = () => {\r\n        this.setState((state) => {\r\n            state.openDialog = false;\r\n            return state;\r\n        });\r\n    };\r\n\r\n    loadChats = () => {\r\n        var self = this;\r\n        chrome.storage.local.get([\"settsData\"], (r) => {\r\n            console.log(r)\r\n            console.log('platform ', self.props.platform)\r\n            if (\r\n                r.settsData != undefined &&\r\n                r.settsData.messages &&\r\n                r.settsData.messages[this.props.platform] &&\r\n                r.settsData.messages[this.props.platform].groupToken\r\n            ) {\r\n                self.gotToken(\r\n                    r.settsData.messages[this.props.platform].groupToken\r\n                );\r\n            } else {\r\n                self.setState((state) => {\r\n                    state.hasToken = false;\r\n                    state.groupToken = undefined;\r\n                    return state;\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    gotToken = (token) => {\r\n        var self = this;\r\n        var t = token;\r\n        chrome.storage.local.get([\"settsData\"], (r) => {\r\n            var data = r.settsData != undefined ? r.settsData : {};\r\n            data.messages = data.messages ? data.messages : [];\r\n            data.messages[self.props.platform] = data.messages[\r\n                self.props.platform\r\n            ]\r\n                ? data.messages[self.props.platform]\r\n                : {};\r\n            data.messages[self.props.platform].groupToken = t;\r\n            chrome.storage.local.set({ settsData: data }, () => {\r\n                self.setState((state) => {\r\n                    state.hasToken = true;\r\n                    state.groupToken = t;\r\n                    state.openDialog = false;\r\n                    return state;\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    render = () => {\r\n        this.loadChats();\r\n        if (this.state.hasToken == undefined) {\r\n            return <CircularProgress style={{ padding: 20 }} />;\r\n        } else if (this.state.hasToken) {\r\n            return (\r\n                <>\r\n                    <List>\r\n                        <ListItem button onClick={this.openDialog}>\r\n                            <ListItemIcon>\r\n                                <EditIcon />\r\n                            </ListItemIcon>\r\n                            <ListItemText\r\n                                primary={\r\n                                    this.state.groupToken.slice(0, 5) + \"...\"\r\n                                }\r\n                            />\r\n                        </ListItem>\r\n                    </List>\r\n                    <APIKeyDialog\r\n                        open={this.state.openDialog}\r\n                        onCancel={this.closeDialog}\r\n                        onOk={this.gotToken}\r\n                    />\r\n                    <ChatSelector\r\n                        platfrom={this.props.platform}\r\n                        token={this.state.groupToken}\r\n                    />\r\n                </>\r\n            );\r\n        } else {\r\n            return (\r\n                <>\r\n                    <List>\r\n                        <ListItem button onClick={this.openDialog}>\r\n                            <ListItemIcon>\r\n                                <AddIcon />\r\n                            </ListItemIcon>\r\n                            <ListItemText primary={\"Укажите API-ключ группы\"} />\r\n                        </ListItem>\r\n                    </List>\r\n                    <APIKeyDialog\r\n                        open={this.state.openDialog}\r\n                        onCancel={this.closeDialog}\r\n                        onOk={this.gotToken}\r\n                    />\r\n                </>\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nclass ChatSelector extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { loaded: false };\r\n    }\r\n\r\n    render = () => {\r\n        if (this.state.loaded) {\r\n            return <div>test</div>;\r\n        } else {\r\n            return <CircularProgress style={{ padding: 20 }} />;\r\n        }\r\n    };\r\n}\r\n\r\nexport default MessagesTab;\r\n"]},"metadata":{},"sourceType":"module"}