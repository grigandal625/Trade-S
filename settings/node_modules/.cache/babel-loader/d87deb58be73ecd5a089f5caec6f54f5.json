{"ast":null,"code":"import _classCallCheck from\"E:\\\\Olympcepy\\\\settings\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";/*global chrome*/var API=function API(){_classCallCheck(this,API);};API.recieved=function(callback){return function(event){try{callback(JSON.parse(event.currentTarget.responseText));}catch(e){}};};API.authorize=function(id,token,callback){var xhr=new XMLHttpRequest();xhr.open(\"POST\",\"https://trades.pythonanywhere.com/api\");var obj={method:\"auth\",data:{id:id,token:token}};xhr.onload=API.recieved(callback);xhr.send(JSON.stringify(obj));};API.getUserById=function(id,callback){var xhr=new XMLHttpRequest();xhr.open(\"POST\",\"https://trades.pythonanywhere.com/api\");var obj={method:\"user\",data:{id:id}};xhr.onload=API.recieved(callback);xhr.send(JSON.stringify(obj));};API.getUserByKey=function(key,callback){var xhr=new XMLHttpRequest();xhr.open(\"POST\",\"https://trades.pythonanywhere.com/api\");var obj={method:\"user\",data:{key:key}};xhr.onload=API.recieved(callback);xhr.send(JSON.stringify(obj));};API.getMyData=function(callback){var cb=callback;chrome.storage.local.get([\"userId\"],function(r){API.getUserById(r.userId,cb);});};API.setUserSetts=function(id,setts,callback){var xhr=new XMLHttpRequest();xhr.open(\"POST\",\"https://trades.pythonanywhere.com/api\");var obj={method:\"setts\",data:{id:id,setts:setts}};xhr.onload=API.recieved(callback);xhr.send(JSON.stringify(obj));};API.setUserSettsByKey=function(key,setts,callback){API.getUserByKey(key,function(resp){API.setUserSetts(resp.id,setts,callback);});};API.uploadMySetts=function(callback){var cb=callback;chrome.storage.local.get([\"settsData\",\"userId\"],function(res){var r=res;if(r.userId&&r.settsData){var setts={accessToken:r.settsData.accessToken?r.settsData.accessToken:undefined,messages:r.settsData.messages?r.settsData.messages.map(function(e){return{groupToken:e.groupToken?e.groupToken:undefined,toShow:e.toShow?e.toShow:[]};}):undefined,posts:r.settsData.posts?r.settsData.posts.map(function(e){return{toShow:e.toShow?e.toShow:[]};}):undefined};API.setUserSetts(r.userId,setts,cb);}});};API.downloadMySetts=function(callback){var cb=callback;chrome.storage.local.get([\"settsData\",\"userId\"],function(res){var r=res;if(r.userId){API.getUserById(r.userId,function(user){var setts=r.settsData?r.settsData:{};setts.messages=user.setts.messages?user.setts.messages.map(function(e,i){e.toSend=e.toSend!=undefined?e.toSend:setts.messages&&setts.messages[i]&&setts.messages[i].toSend?setts.messages[i].toSend:[];e.toShow=e.toShow!=undefined?e.toShow:setts.messages&&setts.messages[i]&&setts.messages[i].toShow?setts.messages[i].toShow:[];return e;}):[];setts.posts=user.setts.posts?user.setts.posts.map(function(e,i){e.toSend=e.toSend!=undefined?e.toSend:setts.posts&&setts.posts[i]&&setts.posts[i].toSend?setts.posts[i].toSend:[];e.toShow=e.toShow!=undefined?e.toShow:setts.posts&&setts.posts[i]&&setts.posts[i].toShow?setts.posts[i].toShow:[];return e;}):[];setts.accessToken=user.setts.accessToken;chrome.storage.local.set({settsData:setts},function(){try{cb(setts);}catch(e){}});});}});};export default API;","map":{"version":3,"sources":["E:/Olympcepy/settings/src/API.js"],"names":["API","recieved","callback","event","JSON","parse","currentTarget","responseText","e","authorize","id","token","xhr","XMLHttpRequest","open","obj","method","data","onload","send","stringify","getUserById","getUserByKey","key","getMyData","cb","chrome","storage","local","get","r","userId","setUserSetts","setts","setUserSettsByKey","resp","uploadMySetts","res","settsData","accessToken","undefined","messages","map","groupToken","toShow","posts","downloadMySetts","user","i","toSend","set"],"mappings":"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","sourcesContent":["/*global chrome*/\r\n\r\nclass API {\r\n    static recieved = (callback) => (event) => {\r\n        try {\r\n            callback(JSON.parse(event.currentTarget.responseText));\r\n        } catch (e) {}\r\n    };\r\n\r\n    static authorize = (id, token, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://trades.pythonanywhere.com/api\");\r\n        var obj = {\r\n            method: \"auth\",\r\n            data: {\r\n                id: id,\r\n                token: token,\r\n            },\r\n        };\r\n        xhr.onload = API.recieved(callback);\r\n        xhr.send(JSON.stringify(obj));\r\n    };\r\n\r\n    static getUserById = (id, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://trades.pythonanywhere.com/api\");\r\n        var obj = {\r\n            method: \"user\",\r\n            data: {\r\n                id: id,\r\n            },\r\n        };\r\n        xhr.onload = API.recieved(callback);\r\n        xhr.send(JSON.stringify(obj));\r\n    };\r\n\r\n    static getUserByKey = (key, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://trades.pythonanywhere.com/api\");\r\n        var obj = {\r\n            method: \"user\",\r\n            data: {\r\n                key: key,\r\n            },\r\n        };\r\n        xhr.onload = API.recieved(callback);\r\n        xhr.send(JSON.stringify(obj));\r\n    };\r\n\r\n    static getMyData = (callback) => {\r\n        var cb = callback;\r\n        chrome.storage.local.get([\"userId\"], (r) => {\r\n            API.getUserById(r.userId, cb);\r\n        });\r\n    };\r\n\r\n    static setUserSetts = (id, setts, callback) => {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", \"https://trades.pythonanywhere.com/api\");\r\n        var obj = {\r\n            method: \"setts\",\r\n            data: {\r\n                id: id,\r\n                setts: setts,\r\n            },\r\n        };\r\n        xhr.onload = API.recieved(callback);\r\n        xhr.send(JSON.stringify(obj));\r\n    };\r\n\r\n    static setUserSettsByKey = (key, setts, callback) => {\r\n        API.getUserByKey(key, (resp) => {\r\n            API.setUserSetts(resp.id, setts, callback);\r\n        });\r\n    };\r\n\r\n    static uploadMySetts = (callback) => {\r\n        var cb = callback;\r\n        chrome.storage.local.get([\"settsData\", \"userId\"], (res) => {\r\n            var r = res;\r\n            if (r.userId && r.settsData) {\r\n                var setts = {\r\n                    accessToken: r.settsData.accessToken\r\n                        ? r.settsData.accessToken\r\n                        : undefined,\r\n                    messages: r.settsData.messages\r\n                        ? r.settsData.messages.map((e) => {\r\n                              return {\r\n                                  groupToken: e.groupToken\r\n                                      ? e.groupToken\r\n                                      : undefined,\r\n                                  toShow: e.toShow ? e.toShow : [],\r\n                              };\r\n                          })\r\n                        : undefined,\r\n                    posts: r.settsData.posts\r\n                        ? r.settsData.posts.map((e) => {\r\n                              return {\r\n                                  toShow: e.toShow ? e.toShow : [],\r\n                              };\r\n                          })\r\n                        : undefined,\r\n                };\r\n                API.setUserSetts(r.userId, setts, cb);\r\n            }\r\n        });\r\n    };\r\n\r\n    static downloadMySetts = (callback) => {\r\n        var cb = callback;\r\n        chrome.storage.local.get([\"settsData\", \"userId\"], (res) => {\r\n            var r = res;\r\n            if (r.userId) {\r\n                API.getUserById(r.userId, (user) => {\r\n                    var setts = r.settsData ? r.settsData : {};\r\n                    setts.messages = user.setts.messages\r\n                        ? user.setts.messages.map((e, i) => {\r\n                              e.toSend =\r\n                                  e.toSend != undefined\r\n                                      ? e.toSend\r\n                                      : setts.messages &&\r\n                                        setts.messages[i] &&\r\n                                        setts.messages[i].toSend\r\n                                      ? setts.messages[i].toSend\r\n                                      : [];\r\n                              e.toShow =\r\n                                  e.toShow != undefined\r\n                                      ? e.toShow\r\n                                      : setts.messages &&\r\n                                        setts.messages[i] &&\r\n                                        setts.messages[i].toShow\r\n                                      ? setts.messages[i].toShow\r\n                                      : [];\r\n                              return e;\r\n                          })\r\n                        : [];\r\n                    setts.posts = user.setts.posts\r\n                        ? user.setts.posts.map((e, i) => {\r\n                              e.toSend =\r\n                                  e.toSend != undefined\r\n                                      ? e.toSend\r\n                                      : setts.posts &&\r\n                                        setts.posts[i] &&\r\n                                        setts.posts[i].toSend\r\n                                      ? setts.posts[i].toSend\r\n                                      : [];\r\n                              e.toShow =\r\n                                  e.toShow != undefined\r\n                                      ? e.toShow\r\n                                      : setts.posts &&\r\n                                        setts.posts[i] &&\r\n                                        setts.posts[i].toShow\r\n                                      ? setts.posts[i].toShow\r\n                                      : [];\r\n                              return e;\r\n                          })\r\n                        : [];\r\n                    setts.accessToken = user.setts.accessToken;\r\n                    chrome.storage.local.set(\r\n                        {\r\n                            settsData: setts,\r\n                        },\r\n                        () => {\r\n                            try {\r\n                                cb(setts);\r\n                            } catch (e) {}\r\n                        }\r\n                    );\r\n                });\r\n            }\r\n        });\r\n    };\r\n}\r\n\r\nexport default API;\r\n"]},"metadata":{},"sourceType":"module"}